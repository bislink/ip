<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=1"/>
<meta name="HandheldFriendly" content="True"/>

<link  href="/jquery/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/jquery/bootstrap/fixed-top/navbar-fixed-top.css" rel="stylesheet">
<!--HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries-->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<title>Get Visitor IP!</title>

<style type="text/css">
	body {
	font-family:Verdana, sans-seriff, seriff;
	font-size:2em;
	}
	ol {
	width:auto;
	height: auto;
	border:0px #ffffc0 dotted;
	display: block;
	}	
	ol li {
	background-color:#ffffc0;
	}
	h1, h2 {
	margin: 0.5em 0 0.5em 0;
	padding: 0;
	font-weight: bold;
}

h1 {
	font-size: 1.2em;
}
h2 {
	font-size: 1.1em;
}
</style>

<script type="text/javascript" src="//bislinks.com/free/ip/index.cgi?ip"></script>

</head>

<body>

<!--TOP FIXED NAVBAR-->
<script type="text/javascript" src="/js/utils/BL_top-nav-bar.js"></script>
<script type="text/javascript">fixed_top_navbar("IP Addr");</script>

<div class="container">

	<header><h1>Get IP Address</h1></header>
	
	<section><h2>Instructions</h2>
		<table class="table table-striped table-bordered table-hover table-responsive">
		<thead><tr><th>Easy to install, in just TWO steps</th></tr></thead>
		<tbody>
			<tr><td>Import Server-side Perl Script as JavaScript source into &lt;head&gt; part of your HTML file:  &lt;script src="<b>http://bislinks.com/free/ip/index.cgi?ip</b>"&gt;&lt;/script&gt; </td></tr>
			<tr><td>&lt;script type="text/javascript"&gt;document.write('Your IP is ' +bl_user_ip+ '');	&lt;/script&gt;</td></tr>
			<tr><td>See the source of Perl/CGI program: <a href="index.cgi?source">Source</a>; You wouldn't need it unless you want to host it yourself on your own server</td></tr>
		</tbody>
		</table>
	</section>

	<section><h2>Usage Examples</h2></section>
	
	<section><h2>Using simple JavaScript</h2>
		<script type="text/javascript">
			document.write('Your IP Number is ' +bl_user_ip+ ' ');
		</script>
	</section>
	
	
	<section><h2>Using AJAX</h2>
		<div id="ajax_ip">
			
		</div>
	</section>
	
	<div id="xml"><h2>As XML, Parsed</h2>
		<div></div>
		<p></p>
	</div>
	
	
	<div id="json"><h2>As JSON, Parsed</h2>
		<div></div>
	</div>

</div><!--end container-->










<!--jquery-->
<script  type="text/javascript" src="/jquery/jquery-2.1.1.min.js"></script>
<!--bootstrap-->
<script type="text/javascript" src="/jquery/bootstrap/js/bootstrap.min.js"></script>

<script type="text/javascript">
//<!--
$(document).ready( function() {

function show_ajax_ip(data,status) {

	var ajax_ip = data;
	//return $('#ajax_ip').append('<p>' +data+ '</p>');
}

$.ajax({
url: './index.cgi?ajax',
statusCode: {
		404: function() {
	      	$('#ajax_ip').append('<p>Page not found</p>');
	    },
		200: function(data,status) {
			$('#ajax_ip').append('<p>Your IP address is ' +data+ '. </p>');
		},
		500: function() {
			$('#ajax_ip').append('<p>Error loading page</p>');
		},
	
	}, //statusCode
	//success: show_ajax_ip()

});	// ajax


//parse XML via AJAX

function getParseXML(xml,status) {
	var item = $(xml).find("ip");
	
	$(item).each(function() {
    	//$("#xml p").append('Dumping all XML data:<br />' + $( item ).text() + '<br />' );
  	});
}

$.ajax({
url: './index.cgi?xml',
type: 'GET',
dataType: "xml",

statusCode: {
		404: function() {
	      	$('#xml div').append('Page not found ');
	    },
		200: function(data,status) {
			//$('#xml div').append('&lt;' +status+ '&gt;');

			var ipAddr = $(data).find("address");			// Get just one particular item from the XML output
			var instr = $(data).find("instructions");
			
			$('#xml div').append('Your unique network ID is ' + $( ipAddr ).text() + ' ');
			//$('#xml div').append('<br />Instructions Page: ' + $(instr).text() + '<br /><br />');
		},
		500: function() {
			$('#xml div').append('Error loading page ');
		},
	
	}, //statusCode
	success: getParseXML
});	// ajax xml


// PARSE JSON USING AJAX!
$.ajax({
url: './index.cgi?json',
type: 'GET',
////data: { get_param: 'value' }, 
dataType: 'json',
statusCode: {
		404: function() {
	      	$('#json').append('Page not found');
	    },
		200: function(data,status) {
			
			//$('#json div').append('JSON: ' +status+ '<br />');
			///var obj = JSON.parse(data);
			///$('#json div').append ('' + obj.YourIP+ '');
			
		},
		500: function() {
			$('#json').append('Error loading page');
		},

	},
	success: function(result,status) {
		////var j = JSON.parse(result);		
		////$('#json div').append('' +j.YourIP+ '');
		////$('#json div').append('' +result+ '');			//[object Object]
	},
	
});	// end parse json via ajax

// using method getJSON
$.getJSON("./index.cgi?json",function(result){
     $.each(result, function(i, field){
       //$("#json div").append('' +i+ ' ' + field + '');		//OK
     });
     var ar = result;
     $("#json div").append('Your PC\'s Unique ID is ' + ar.YourIP ); //+ ' <br />Instructions: ' + ar.Instructions + ' ');		//
     
   });

});// ready

//-->
</script>

</body>

</html>


